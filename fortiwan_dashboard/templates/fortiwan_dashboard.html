<!--Fetch_Layout File-->
{% extends 'base.html' %}

<!--Set Tab Title-->
{% block title %}Dashboard - Fortiwan{% endblock %}

{% block app_title %}Welcome to Fortiwan BCFA{% endblock %}

{% block app_subtitle %}A WebApp derived from the FortiOS REST API.{% endblock %}

{% block current_location %}Dashboard{% endblock %}
<!--Body Content-->
{% block content %}
<div class="row gap-2">
    <!-- IPsec VPN Tunnels -->
    <div class="col-md-4 col-12">
        <p class="fs-2 mb-1">IPsec VPN Tunnels Activity</p>
        <form>
            <div class="input-group">
                <div class="form-floating">
                    <input type="text" class="form-control" id="floatingInput" placeholder="Search IPsec VPN Tunnels">
                    <label for="floatingInput">Search IPsec Tunnels</label>
                </div>                
                <button class="btn btn-outline-secondary" type="button" id="button-addon2">Go</button>
              </div>
        </form>    
        
        {% if tunnels %}
        <ol class="list-group list-group-numbered mt-2">
            {% for vpn_tunnel, value in tunnels.items %}
            <li class="list-group-item d-flex justify-content-between align-items-start">
                <div class="ms-2 me-auto">
                    <div class="fw-bold">
                        {{ vpn_tunnel }} | {{ value.comments }} | <span class="badge bg-success rounded-pill">STATUS {{ value.proxy_status|upper}}</span>
                    </div>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                              <th scope="col">Expires</th>
                              <th scope="col">Incoming</th>
                              <th scope="col">Outgoing</th>
                              <th scope="col">Tunnel IP</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <th scope="row">{{ value.proxy_expire }}</th>
                              <td>{{ value.proxy_incoming_bytes }} MB/s</td>
                              <td>{{ value.proxy_outgoing_bytes }} MB/s</td>
                              <td>{{ value.tun_id }}</td>
                            </tr>
                          </tbody>
                      </table>

                </div>                
            </li>
            {% endfor %}
        </ol>
        {% else %}
        <div id="spinner" class="spinner-border text-primary" role="status">
            <span class="sr-only"></span>
        </div>
        {% endif %}
    </div>
    <div class="col-md-6 col-12"></div>

</div>
{% endblock %}